{% extends "base.html" %}
{% block title %}Your Cart{% endblock %}

{% block content %}
<section class="py-5">
<div class="container">

<h2 class="mb-4"><i class="fas fa-shopping-cart me-2"></i>Your Cart</h2>

{% if cart %}
<div class="table-responsive">
<table class="table align-middle">
<thead>
<tr>
<th>Product</th>
<th>Qty</th>
<th>Price</th>
<th></th>
</tr>
</thead>
<tbody>
{% for item in cart.values() %}
<tr>
<td>
<img src="{{ item.image }}" width="60" class="me-2 rounded">
{{ item.name }}
</td>
<td>{{ item.qty }}</td>
<td>MWK {{ "{:,.0f}".format(item.price * item.qty) }}</td>
<td>
<form method="POST" action="{{ url_for('remove_from_cart', product_id=item.id) }}">
<button class="btn btn-sm btn-danger">
<i class="fas fa-trash"></i>
</button>
</form>
</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>

<div class="text-end mt-4">
<h4>Total: MWK {{ "{:,.0f}".format(total) }}</h4>

<a href="{{ url_for('cart_checkout') }}"
class="btn btn-success btn-lg mt-3">
<i class="fab fa-whatsapp me-2"></i>
Checkout on WhatsApp
</a>
</div>

{% else %}
<p>Your cart is empty.</p>
{% endif %}

</div>
</section>
{% endblock %}
